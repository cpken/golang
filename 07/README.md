#### 第七章 数组与切片

#### 7.1 声明和初始化

##### 7.1.1 概念

数组是具有相同 唯一类型 的一组已编号且长度固定的数据项序列（这是一种同构的数据结构）；这种类型可以是任意的原始类型
例如整形、字符串或者自定义类型，数组长度必须是一个常量表达式，并且必须是一个非负整数，数组长度也是数组类型的一部分，
所以 [5]int 和 [10]int 是属于不同类型的。数组的编译时值初始化是按照数组顺序完成的。  

注意事项：如果我们想让数组元素类型为任意类型的话可以使用空接口作为类型。当使用值时我们必须先做一个类型判断。  

数组元素可以通过 索引（位置）来读取（或修改），索引从 0 开始，第一个索引为 0，第二个索引为 1，以此类推。
元素的数目，也称为长度或者数组大小必须是固定的并且在声明该数组时就给出（编译时需要知道数组长度以便分配内存）；
数组长度最大为 2 GB。  

声明格式

~~~go
var identifier [len]type
~~~

例如：

~~~go
var arr1 [5]int
~~~

在内存中的结构是：

![image](https://github.com/cpken/theWayToGoNote/blob/master/07/07-1.png)

每个元素是一个整形值，当声明数组时所有的元素都会被自动初始化为默认值 0。  

arr1 的长度是 5，索引范围从 0 到 len(arr1)-1。  

使用 for 结构遍历数组：

- 通过 for 初始化数组项
- 通过 for 打印数组元素
- 通过 for 依次处理元素

示例 7.1 for_arrays.go

~~~go
package main
import "fmt"

func main() {
	var arr1 [5]int
	
	for i:=0; i < len(arr1); i++ {
		arr1[i] = i * 2
	}
	
	for i:=0; i < len(arr1); i++ {
		fmt.Printf("Array at idnex %d is %d\n", i, arr1[i])
	}
}
~~~

输出结果：

~~~
Array at index 0 is 0
Array at index 1 is 2
Array at index 2 is 4
Array at index 3 is 6
Array at index 4 is 8
~~~

Go 语言中的数组是一种 值类型（不像 C/C++ 中是指向首元素的指针），所以可以通过 new() 来创建：
var arr1 = new([5]int)。  

那么这种方式和 var arr2 [5]int 的区别是什么？ arr1 的类型是 *[5]int，而 arr2 的类型是 [5]int。  

这样的结果就是当把一个数组赋值给另一个时，需要在做一次数组内存的拷贝操作，例如：

~~~go
arr2 := arr1
arr2[2] = 100
~~~

在函数中数组作为参数传入时，会产生一次数组拷贝，拷贝不会修改原始的数组。  

通过使用 & 操作符以引用方式传过来，可以修改原始的数组。

<br><br>


#### 7.1.2 数组常量